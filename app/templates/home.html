{% extends "base.html" %}
{% block title %}Home - My Shop{% endblock %}
{% block content %}
  <h1>Featured Products</h1>
  <div class="grid">
    {% for p in featured_products %}
      <div class="card">
        <a href="{{ url_for('catalog.product_detail', slug=p.slug) }}">
          {% if p.images and p.images[0] %}
            <img src="{{ p.images[0].image_url }}" alt="{{ p.images[0].alt_text }}">
          {% endif %}
          <h3>{{ p.name }}</h3>
        </a>
        <p>${{ '%.2f'|format(p.price) }}</p>
        <form action="{{ url_for('cart.add') }}" method="post">
          <input type="hidden" name="product_id" value="{{ p.id }}">
          <input type="number" name="quantity" value="1" min="1" />
          <button type="submit">Add to cart</button>
        </form>
      </div>
    {% else %}
      <p>No featured products yet.</p>
    {% endfor %}
  </div>

  <h2>Categories</h2>
  <ul class="categories">
    {% for c in categories %}
      <li><a href="{{ url_for('catalog.product_list') }}?category={{ c.slug }}">{{ c.name }}</a></li>
    {% else %}
      <li>No categories.</li>
    {% endfor %}
  </ul>
{% endblock %}